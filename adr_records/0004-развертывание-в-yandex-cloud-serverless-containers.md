# 3. Развертывание в Yandex Cloud Serverless Containers

Дата: 2025-11-26

## Статус

Принято

## Контекст

Необходимо выбрать платформу для развертывания ML-сервиса в продакшене. Требования: автоматическое масштабирование, минимальные затраты на обслуживание, интеграция с экосистемой Yandex Cloud.

## Рассмотренные варианты

### Вариант 1: Yandex Cloud Serverless Containers
- **Плюсы**: Автомасштабирование, pay-per-use, managed service
- **Минусы**: Vendor lock-in, ограничения на размер образа

### Вариант 2: Yandex Cloud Compute (ВМ)
- **Плюсы**: Полный контроль, гибкость
- **Минусы**: Необходимость управления инфраструктурой, ручное масштабирование

### Вариант 3: Kubernetes (Yandex Managed Kubernetes)
- **Плюсы**: Стандарт индустрии, гибкость, переносимость
- **Минусы**: Сложность настройки и управления, избыточность для одного сервиса

## Решение

Использовать Yandex Cloud Serverless Containers для развертывания.

## Обоснование

1. **Экономическая эффективность**: Оплата только за реальное использование
2. **Минимальные операционные затраты**: Yandex управляет инфраструктурой
3. **Автомасштабирование**: Обработка пиковых нагрузок без вмешательства
4. **Интеграция с экосистемой**: Мониторинг, логи, безопасность из коробки
5. **Быстрое развертывание**: Простой пайплайн от кода до прода

## Архитектура развертывания

- Docker образ в Yandex Container Registry
- Serverless Container с автоматическим масштабированием
- Балансировщик нагрузки с health checks
- Мониторинг через Yandex Monitoring
- Логи через Yandex Logging

## Последствия

### Положительные
- Низкая стоимость при небольших нагрузках
- Отсутствие необходимости управления серверами
- Высокая доступность и отказоустойчивость
- Быстрое время выхода на рынок

### Отрицательные
- Vendor lock-in к Yandex Cloud
- Ограничения на размер контейнера (4GB)
- Холодный старт может влиять на latency
- Ограниченный контроль над инфраструктурой

## Компромиссы

Пожертвовали полным контролем над инфраструктурой ради уменьшения операционных затрат и автоматического масштабирования.

## Мониторинг и метрики

- Response time < 50ms для 95% запросов
- Автоматическое масштабирование от 0 до 10 инстансов
- Health checks каждые 30 секунд
- Логирование всех ошибок и медленных запросов